# パフォーマンス最適化

## モデル選択戦略

**Haiku 4.5**（Sonnetの90%の能力、3倍のコスト削減）:
- 頻繁に呼び出される軽量エージェント
- ペアプログラミングとコード生成
- マルチエージェントシステムのワーカーエージェント

**Sonnet 4.5**（最高のコーディングモデル）:
- メインの開発作業
- マルチエージェントワークフローのオーケストレーション
- 複雑なコーディングタスク

**Opus 4.5**（最も深い推論）:
- 複雑なアーキテクチャ決定
- 最大限の推論が必要な要件
- 研究と分析タスク

## コンテキストウィンドウ管理

コンテキストウィンドウの最後の20%では避ける:
- 大規模なリファクタリング
- 複数ファイルにまたがる機能実装
- 複雑なインタラクションのデバッグ

コンテキスト感度が低いタスク:
- 単一ファイルの編集
- 独立したユーティリティの作成
- ドキュメントの更新
- シンプルなバグ修正

## Ultrathink + Planモード

深い推論が必要な複雑なタスクに:
1. 強化された思考に`ultrathink`を使用
2. 構造化されたアプローチに**Planモード**を有効化
3. 複数の批評ラウンドで「エンジンを回す」
4. 多様な分析に役割分担されたサブエージェントを使用

## ビルドトラブルシューティング

ビルドが失敗したら:
1. **build-error-resolver**エージェントを使用
2. エラーメッセージを分析
3. 段階的に修正
4. 各修正後に確認
