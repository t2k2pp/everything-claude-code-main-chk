---
description: テスト駆動開発ワークフローを強制。インターフェースをスキャフォルド、最初にテストを生成、その後最小限のコードを実装。80%以上のカバレッジを確保。
---

# TDDコマンド

このコマンドは**tdd-guide**エージェントを呼び出し、テスト駆動開発方法論を強制します。

## このコマンドがすること

1. **インターフェースをスキャフォルド** - 最初に型/インターフェースを定義
2. **テストを最初に生成** - 失敗するテストを書く（RED）
3. **最小限のコードを実装** - 通過するために必要なだけを書く（GREEN）
4. **リファクタリング** - テストをグリーンに保ちながらコードを改善（REFACTOR）
5. **カバレッジを確認** - 80%以上のテストカバレッジを確保

## 使用タイミング

`/tdd`を使用する場面:
- 新機能の実装
- 新しい関数/コンポーネントの追加
- バグ修正（まずバグを再現するテストを書く）
- 既存コードのリファクタリング
- 重要なビジネスロジックの構築

## TDDサイクル

```
RED → GREEN → REFACTOR → REPEAT

RED:      失敗するテストを書く
GREEN:    通過する最小限のコードを書く
REFACTOR: コードを改善、テストは成功を維持
REPEAT:   次の機能/シナリオ
```

## TDDベストプラクティス

**する:**
- ✅ 実装の前に最初にテストを書く
- ✅ 実装前にテストを実行して失敗を確認
- ✅ テストを通過する最小限のコードを書く
- ✅ テストがグリーンになった後にのみリファクタリング
- ✅ エッジケースとエラーシナリオを追加
- ✅ 80%以上のカバレッジを目指す（重要なコードは100%）

**しない:**
- ❌ テストの前に実装を書く
- ❌ 各変更後のテスト実行をスキップ
- ❌ 一度に多くのコードを書く
- ❌ 失敗するテストを無視
- ❌ 実装の詳細をテスト（動作をテスト）
- ❌ すべてをモック（統合テストを優先）

## カバレッジ要件

- **80%最小**すべてのコードに
- **100%必須**:
  - 財務計算
  - 認証ロジック
  - セキュリティ重要コード
  - コアビジネスロジック

## 他のコマンドとの統合

- まず`/plan`を使用して何を作るか理解
- `/tdd`を使用してテストで実装
- ビルドエラーが発生したら`/build-fix`を使用
- `/code-review`で実装をレビュー
- `/test-coverage`でカバレッジを確認

## 関連エージェント

このコマンドは`tdd-guide`エージェントを呼び出します:
`~/.claude/agents/tdd-guide.md`

`tdd-workflow`スキルを参照できます:
`~/.claude/skills/tdd-workflow/`
